@{
    ViewBag.Title = "專案執行-廠商估驗計價";
    Layout = "~/Views/Shared/_MenuLayout.cshtml";
}
<!--標單項目搜尋區條件區域-->
<div class="container" style="margin:3px">
    <form name="query" id="query" method="post" action="~/Estimation/queryInfo4Estimation" >
        <div class="row bg-primary">
            <div class="col-md-12">
                <label for="projectId" class="col-md-2">專案編號:@ViewBag.projectId</label>
                <input type="hidden" id="projectId" name="projectId" value="@ViewBag.projectId" />
                <label for="projectName" class="col-md-8">專案名稱:@ViewBag.projectName</label>
                <input type="hidden" id="projectName" name="projectName" value="@ViewBag.projectName" />
                <div class="col-md-2 pull-right">
                    <input type="button" class="btn btn-success" onclick="history.back()" value="回上一頁">
                </div>
            </div>
        </div>
        <div class="row bg-info" style="padding-top:3px">
            <div class="col-md-12">
                <label>廠商名稱</label><input type="text" id="suppliserId" name="supplierId" size="30"/>
                <label>日報日期</label><input type="text" id="dtDate_S" name="dtDate_S" />~<input type="text" id="dtDate_E" name="dtDate_E" />
                <label><input type="checkbox" id="only_Material" />材料項目</label>
                <button>查詢</button>
            </div>
            <div class="col-md-12">
                *:勾選材料項目，僅會顯示驗收單之相關估驗資料!!
            </div>
        </div>
    </form>
</div>
<!--標單項目列表區域-->
<div class="container-fluid">
    <div class="container">
        <h3>驗收估驗項目</h3>
        @if (null != Model && null != Model.contractItems)
        {
            Html.RenderPartial("_SupplierContractList");
        }
    </div>
    <div class="container">
        <h3>施工估驗項目</h3>
        @if (null != Model && null != Model.lstEstFromDailyReport)
        {
             Html.RenderPartial("_SupplierEstimationList");
        }
    </div>
    <div class="container">
        <h3>點工估驗項目</h3>
        @if (null != Model && null != Model.dsTempWorkDailyReport)
        {
             Html.RenderPartial("_SupplierTempworker");
        }
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        setCalander("#drDate_S");
        setCalander("#drDate_E");
        setAutoCompleteSupplier("#suppliserId");
    });
    function setCalander(name) {
        $(name).datetimepicker({
            format: 'YYYY/MM/DD',
            locale: 'zh-TW'
        });
    }
    function setAutoCompleteSupplier(name) {
        $(name).typeahead({
            source: function (query, process) {
                return $.ajax({
                    url: '/Inquiry/aotoCompleteData',
                    type: 'post',
                    dataType: 'json',
                    success: function (result) {
                        process(result);
                    }
                })
            },
            afterSelect: function (data) {
                // getContactor(data);
            }
        });
    }
</script>

