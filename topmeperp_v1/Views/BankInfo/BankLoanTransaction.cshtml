@model topmeperp.Models.BankLoanInfo
@{
    ViewBag.Title = "貸款管理-交易記錄維護";
    Layout = "~/Views/Shared/_MenuLayout.cshtml";
}
<!--條件區域-->
<form name="formDailyReport" id="formDailyReport" action="" method="Post">
    <div class="page-header">
        <div class="row">
            <label class="col-sm-1 control-label">編號:</label>
            <div class="col-sm-1">
                <input class="form-control" type="text" id="bl_id" name="bl_id" value="@Model.LoanInfo.BL_ID" readonly />
            </div>
            <label class="col-sm-1 control-label">銀行代號:</label>
            <label class="col-sm-2 info">@Model.LoanInfo.BANK_ID </label>
            <label class="col-sm-1 control-label">銀行名稱:</label>
            <label class="col-sm-2 info">@Model.LoanInfo.BANK_NAME </label>
            <label class="col-sm-1 control-label">貸款期間:</label>
            <label class="col-sm-3 info">@string.Format("{0:yyyy/MM/dd}", @Model.LoanInfo.START_DATE)~@string.Format("{0:yyyy/MM/dd}", @Model.LoanInfo.DUE_DATE)</label>
        </div>
        <div class="row">
            <label class="col-sm-1 control-label">額度:</label><label class="col-sm-4 info">@Model.LoanInfo.QUOTA </label>
            <label class="col-sm-1 control-label">期數:</label><label class="col-sm-4 info">@Model.LoanInfo.PERIOD_COUNT </label>
        </div>
        <div class="row">
            <label class="col-sm-1 control-label">備註:</label><label class="col-sm-4 info">@Model.LoanInfo.REMARK </label>
        </div>
    </div>
    <div class="contaier">
        <label class="col-sm-1 control-label">交易明細:</label>
        <div class="row form-group">
            <table class="table order-list">
                <thead>
                    <tr><th>期數</th><th>金額</th></tr>
                </thead>
                <tbody>
                    @if (null != Model.LoanTransaction)
                    {
                        foreach (var item in Model.LoanTransaction)
                        {
                            <tr>
                                <td>@item.PERIOD</td>
                                <td>@item.AMOUNT</td>
                            </tr>
                        }
                    }

                </tbody>
                <tfoot>
                    <tr>
                        <td style="text-align: left;">
                            <input type="button" class="btn btn-lg btn-block " id="addrow" value="新增" />
                        </td>
                    </tr>
                    <tr></tr>
                </tfoot>
            </table>

        </div>
    </div>
</form>
<script>
    $(document).ready(function () {
        var counter = 0;
        $("#addrow").on("click", function () {
            var newRow = $("<tr>");
            var cols = "";

            cols += '<td><input type="text" class="form-control" name="name' + counter + '"/></td>';
            cols += '<td><input type="text" class="form-control" name="mail' + counter + '"/></td>';
            cols += '<td><input type="text" class="form-control" name="phone' + counter + '"/></td>';

            cols += '<td><input type="button" class="ibtnDel btn btn-md btn-danger"  value="刪除"></td>';
            newRow.append(cols);
            $("table.order-list").append(newRow);
            counter++;
        });

        $("table.order-list").on("click", ".ibtnDel", function (event) {
            $(this).closest("tr").remove();
            counter -= 1
        });
        $('#reportDateStart').datetimepicker({
            format: 'YYYY/MM/DD',
            locale: 'zh-tw'
        });
        $('#reportDateEnd').datetimepicker({
            format: 'YYYY/MM/DD',
            locale: 'zh-tw'
        });

    });

    function calculateRow(row) {
        var price = +row.find('input[name^="price"]').val();
    }

    function calculateGrandTotal() {
        var grandTotal = 0;
        $("table.order-list").find('input[name^="price"]').each(function () {
            grandTotal += +$(this).val();
        });
        $("#grandtotal").text(grandTotal.toFixed(2));
    }
</script>

