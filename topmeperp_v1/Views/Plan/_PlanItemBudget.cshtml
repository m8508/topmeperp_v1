@model IEnumerable<topmeperp.Models.PLAN_ITEM>

<form id="formBudget" name="formBudget" action="" method="post">
    <!--不好的方式但檔著先屆時設為Hidden-->
    <input type="hidden" id="projectId" name="projectId" value="@ViewBag.projectid" />
    <input type="hidden" id="textCode1" name="textCode1" value="@ViewBag.textCode1" />
    <input type="hidden" id="textCode2" name="textCode2" value="@ViewBag.textCode2" />
    <input type="hidden" id="textSystemMain" name="textSystemMain" value="@ViewBag.textSystemMain" />
    <input type="hidden" id="textSystemSub" name="textSystemSub" value="@ViewBag.textSystemSub" />
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>材料成本總計</th>
                <th>預算金額總計</th>
                <th>選定項目成本</th>
                <th>選定項目預算</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                @if (ViewBag.cost != null)
            {
                    <td>
                        <span style="color: red; font-size: 20px;">
                            @String.Format("{0:N0}", ViewBag.cost)
                        </span>
                    </td>
                }
                else
                {
                    <td></td>
                }
                @if (ViewBag.budget != null)
            {
                    <td>
                        <span style="color: red; font-size: 20px;">
                            @String.Format("{0:N0}", ViewBag.budget)
                        </span>
                    </td>
                }
                else
                {
                    <td></td>
                }
                @if (ViewBag.itemcost != null)
            {
                    <td>
                        <span style="color: red; font-size: 20px;">
                            @String.Format("{0:N0}", ViewBag.itemcost)
                        </span>
                    </td>
                }
                else
                {
                    <td></td>
                }
                @if (ViewBag.itembudget != null)
            {
                    <td>
                        <span style="color: red; font-size: 20px;">
                            @String.Format("{0:N0}", ViewBag.itembudget)
                        </span>
                    </td>
                }
                else
                {
                    <td></td>
                }
            </tr>
        </tbody>
    </table>
    <table class="table">
        <tr>
            <th>
                No.
            </th>
            <th>
                項次
            </th>
            <th>
                項目說明
            </th>
            <th>
                單位
            </th>
            <th>
                數量
            </th>
            <th>
                單價
            </th>
            <th>
                材料預算比 %
            </th>
            <th>
                工資預算比 %
            </th>
            <th>
                備註
            </th>
            <th>
                九宮格
            </th>
            <th>
                次九宮格
            </th>
            <th>
                主系統
            </th>
            <th>
                次系統
            </th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.TextBox("planitemid", @String.Format("{0:N0}", item.PLAN_ITEM_ID), new { style = "width:50px", @readonly = "readonly" })
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ITEM_ID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ITEM_DESC)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ITEM_UNIT)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ITEM_QUANTITY)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ITEM_UNIT_PRICE)
                </td>
                <td>
                    @Html.TextBox("budgetratio", @String.Format("{0:N0}", item.BUDGET_RATIO), new { style = "width:70px" })
                </td>
                <td>
                    @Html.TextBox("budgetwageratio", @String.Format("{0:N0}", item.BUDGET_WAGE_RATIO), new { style = "width:70px" })
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ITEM_REMARK)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TYPE_CODE_1)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TYPE_CODE_2)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SYSTEM_MAIN)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SYSTEM_SUB)
                </td>
            </tr>
        }
    </table>

    <br />

    <input id="Submit2" type="submit" value="儲存" />
</form>
