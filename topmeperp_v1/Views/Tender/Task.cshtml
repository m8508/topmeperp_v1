
@{
    ViewBag.Title = "工作任務分派";
    Layout = "~/Views/Shared/_MenuLayout.cshtml";
}

<h3>工作分派</h3><br/>
<h4>要進行任務分派時，請按"新增一列"按鈕來新增資料</h4><br/>
<div class="container-fluid">
    <script type="text/javascript" src="../../Scripts/MicrosoftAjax.js"></script>
    <script type="text/javascript" src="../../Scripts/MicrosoftMvcAjax.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.1.min.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
    <div id="Template" style="display: none;">
        <div id="Task_${index}">
            <table border="1">
                <tr>
                    <td></td>
                    <td>工作任務</td>
                    <td>負責人員</td>
                    <td>負責項目</td>
                    <td>預定完成時間</td>
                    <td>簽名</td>
                <tr>
                    <td><input type="hidden" name="TaskDatas.index" value="${index}" /></td>
                    <td><input type="text" name="TaskDatas[${index}].TASK_TYPE" /></td>
                    <td><input type="text" name="TaskDatas[${index}].USER_ID" /></td>
                    <td><input type="text" name="TaskDatas[${index}].TASK_ITEM" /></td>   
                    <td><input type="text" name="TaskDatas[${index}].FINISH_DATE" /></td> 
                    <td><input type="text" name="TaskDatas[${index}].REMARK" /></td>
                    <td></td>    
</table>
              <br />
        </div>
    </div>
    <div>
        @using (Ajax.BeginForm("Index", new AjaxOptions() { UpdateTargetId = "Result" }))
        {
        <input type="button" class="btn btn-primary" value="新增一列" onclick="Add();" />
        <input type="button" class="btn btn-info" value="刪除一列" onclick="Remove();" />
        <input type="submit" class="btn btn-success" value="送出" /><br/><br/>
        <div id="TaskList">
        </div>
        }
    </div>
</div>
    <script type="text/javascript">
    // 將 DIV 內容先轉成 template
    var taskTemplate = $("#Template").template();

    function Add() {
        $.tmpl(taskTemplate, { index: new Date().getTime() }).appendTo("#TaskList");
    }

    function Remove() {
        $().remove();
    }
        </script>

 

